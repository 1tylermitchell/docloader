<!-- Creator     : groff version 1.19.2 -->
<!-- CreationDate: Mon Sep  5 14:44:03 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p     { margin-top: 0; margin-bottom: 0; }
       pre   { margin-top: 0; margin-bottom: 0; }
       table { margin-top: 0; margin-bottom: 0; }
</style>
<title>CBDOCLOADER</title>

</head>
<body>

<h1 align=center>CBDOCLOADER</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#HOST FORMATS">HOST FORMATS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SAMPLE DATA FORMAT">SAMPLE DATA FORMAT</a><br>
<a href="#ENVIRONMENT AND CONFIGURATION VARIABLES">ENVIRONMENT AND CONFIGURATION VARIABLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#CBDOCLOADER">CBDOCLOADER</a><br>

<hr>


<a name="NAME"></a>
<h2>NAME</h2>


<p style="margin-left:11%; margin-top: 1em">cbdocloader
&minus; Loads sample datasets into Couchbase</p>

<a name="SYNOPSIS"></a>
<h2>SYNOPSIS</h2>



<p style="margin-left:11%; margin-top: 1em"><i>cbdocloader</i>
[&minus;&minus;cluster &lt;host&gt;] [&minus;&minus;username
&lt;username&gt;] [&minus;&minus;password &lt;password&gt;]
<br>
[&minus;&minus;bucket &lt;bucket&gt;]
[&minus;&minus;bucket&minus;quota &lt;quota&gt;]
[&minus;&minus;dataset &lt;path&gt;] <br>
[&minus;&minus;thread &lt;num&gt;]
[&minus;&minus;verbose]</p>

<a name="DESCRIPTION"></a>
<h2>DESCRIPTION</h2>


<p style="margin-left:11%; margin-top: 1em">cbdocloader
loads Couchbase sample datasets into Couchbase Server.
Sample data sets are zip files provided by Couchbase that
contain documents and index definitions. These datasets are
meant for users to explore the various Couchbase features
before loading in their own datasets.</p>

<a name="OPTIONS"></a>
<h2>OPTIONS</h2>


<p style="margin-left:11%; margin-top: 1em">Below are a
list of required and optional parameters for the cbdocloader
command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Required</b>
<br>
&minus;c,&minus;&minus;cluster &lt;host&gt;</p>

<p style="margin-left:17%;">The hostname of one of the
nodes in the cluster to load data into. See the Host Formats
section below for hostname specification details.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;u,&minus;&minus;username
&lt;username&gt;</p>

<p style="margin-left:17%;">The username for cluster
authentication. The user must have the appropriate
privileges to create a bucket, write data and create view,
secondary index and full-text index definitions.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;p,&minus;&minus;password
&lt;password&gt;</p>

<p style="margin-left:17%;">The password for cluster
authentication. The user must have the appropriate
privileges to create a bucket, write data and create view,
secondary index and full-text index definitions.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;b,&minus;&minus;bucket</p>

<p style="margin-left:17%;">The name of the bucket to
create and load data into. If the bucket already exists then
bucket creation is skipped and data is loaded into the
existing bucket.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;m,&minus;&minus;bucket-quota</p>

<p style="margin-left:17%;">The amount of memory to assign
to the buckets cache. If the bucket already exists then this
parameter is ignored.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;d,&minus;&minus;dataset</p>

<p style="margin-left:17%;">The path to the sample dataset
to load. The path can either refer to a zip file or a
directory to load data from.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Optional</b>
<br>
&minus;t,&minus;&minus;threads &lt;num&gt;</p>

<p style="margin-left:17%;">Specifies the number of
concurrent clients to use when loading data. Fewer clients
means data loading will take longer, but there will be less
cluster resources used. More clients means faster data
loading, but at the cost of more cluster resource usage.
This parameter defaults to 1 if it is not specified and it
is recommended that this parameter is not set to be higher
than the number of CPUs on the machine where the command is
being run.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;v,&minus;&minus;verbose</p>

<p style="margin-left:17%;">Prints log messages to stdout.
This flag is useful for debugging errors in the data loading
process.</p>

<a name="HOST FORMATS"></a>
<h2>HOST FORMATS</h2>


<p style="margin-left:11%; margin-top: 1em">When specifying
a host for the <i>cbdoclader</i> command the following
formats are expected:</p>

<table width="100%" border=0 rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em" valign="top">&bull;</p></td>
<td width="5%"></td>
<td width="31%">



<p style="margin-top: 1em" valign="top">couchbase://&lt;addr&gt;</p> </td>
<td width="52%">
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em" valign="top">&bull;</p></td>
<td width="5%"></td>
<td width="31%">



<p style="margin-top: 1em" valign="top">&lt;addr&gt;:&lt;port&gt;</p> </td>
<td width="52%">
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em" valign="top">&bull;</p></td>
<td width="5%"></td>
<td width="31%">



<p style="margin-top: 1em" valign="top">http://&lt;addr&gt;:&lt;port&gt;</p> </td>
<td width="52%">
</td>
</table>

<p style="margin-left:11%; margin-top: 1em">It is
recommended to use the couchbase://&lt;addr&gt; format for
standard installations. The other two formats allow an
option to take a port number which is needed for non-default
installations where the admin port has been set up on a port
other that 8091.</p>

<a name="EXAMPLES"></a>
<h2>EXAMPLES</h2>


<p style="margin-left:11%; margin-top: 1em">To load the
dataset travel-sample.zip which is located at
/opt/couchbase/samples/travel-sample.zip into a bucket with
a memory quota of 1024MB we would run the following
command.</p>

<p style="margin-left:11%; margin-top: 1em">$ cbdocloader
-c couchbase://127.0.0.1 -u Administrator -p password -m
1024 \ <br>
-b travel-sample -d
/opt/couchbase/samples/travel-sample.zip</p>

<p style="margin-left:11%; margin-top: 1em">If we want to
increase the parallelism of data loading then we can
increase the parallelism by using the threads option. In the
example below we will use 4 threads.</p>

<p style="margin-left:11%; margin-top: 1em">$ cbdocloader
-c couchbase://127.0.0.1 -u Administrator -p password -m
1024 \ <br>
-b travel-sample -d /opt/couchbase/samples/travel-sample.zip
-t 4</p>

<p style="margin-left:11%; margin-top: 1em">The cbdocloader
command can also be used to load data from a folder. This
folder must contain files that correspond to the samples
format. See the SAMPLE DATA FORMAT section below for more
information on this format. Below is an example of how to
load data from a folder /home/alice/census-sample</p>

<p style="margin-left:11%; margin-top: 1em">$ cbdocloader
-c couchbase://127.0.0.1 -u Administrator -p password -m
1024 \ <br>
-b census-sample -d /home/alice/census-sample</p>

<a name="SAMPLE DATA FORMAT"></a>
<h2>SAMPLE DATA FORMAT</h2>


<p style="margin-left:11%; margin-top: 1em">The cbdocloader
command is used to load data from zip files or folders that
correspond to the Couchbase sample data format. An example
of this format is below.</p>

<p style="margin-left:11%; margin-top: 1em">+ sample_folder
<br>
+ design_docs <br>
indexes.json <br>
design_doc.json <br>
+ docs <br>
document1.json <br>
document2.json <br>
document3.json <br>
document4.json</p>

<p style="margin-left:11%; margin-top: 1em">The top level
directory can be given any name and will always contain two
folders. The &quot;design_docs&quot; folder is where index
definitions are kept. This folder will contain zero or more
json files that contain the various indexes that should be
created when the sample dataset is loaded. Global Secondary
Indexes (GSI) should always be in a file named
&quot;indexes.json&quot;. Below is an example of the format
for defining GSI indexes.</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;statements&quot;: [ <br>
{ <br>
&quot;statement&quot;: &quot;CREATE PRIMARY INDEX on
&lsquo;bucket1&lsquo;&quot;, <br>
&quot;args&quot;: null <br>
}, <br>
{ <br>
&quot;statement&quot;: &quot;CREATE INDEX by_type on
&lsquo;bucket1&lsquo;(name) WHERE
_type=&rsquo;User&rsquo;&quot; <br>
&quot;args&quot;: null <br>
} <br>
] <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">GSI indexes are
defined as a JSON document where each index definition is
contained in a list called &quot;statements&quot;. Each
element in the list is an object that contains two keys. The
&quot;statement&quot; key contains that actual index
definition and the &quot;args&quot; key is used if the
statement contains any positional arguments.</p>

<p style="margin-left:11%; margin-top: 1em">All other files
in the design_docs folder are used to define view design
documents and each design document should be put into a
separate file. These files can be named anything, but should
always have the &quot;.json&quot; file extension. Below is
an example of a view design document definition.</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;_id&quot;: &quot;_design/players&quot; <br>
&quot;views&quot;: { <br>
&quot;total_experience&quot;: { <br>
&quot;map&quot;: &quot;function(doc,meta){if(doc.jsonType ==
<br>
&quot;reduce&quot;: &quot;_sum&quot; <br>
}, <br>
&quot;player_list&quot;: { <br>
&quot;map&quot;: &quot;function (doc, meta){if(doc.jsonType
== <br>
} <br>
} <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">In the document
above, the &quot;_id&quot; field is used to name the design
document. This name should always be prefixed with
&quot;_design/&quot;. The other field in the top level of
the document is the &quot;views&quot; field. This field
contains a map of view definitions. The key for each element
in the map is the name of the view. Each view must contain a
&quot;map&quot; element that defines the map function and
may also contain an optional &quot;reduce&quot; element that
defines the reduce function.</p>

<p style="margin-left:11%; margin-top: 1em">View design
documents support map-reduce views as well as spatial views.
Below is an example of a spatial view definition. Spatial
views follow similar rules as the map-reduce views
above.</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;_id&quot;: &quot;_design/spatial&quot;</p>

<table width="100%" border=0 rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p valign="top">&quot;spatial&quot;: {
&quot;position&quot;: &quot;&lt;spatial view function
definition&gt;&quot;, &quot;location&quot;:
&quot;&lt;spatial view function definition&gt;&quot;</p></table>

<p style="margin-left:11%;">} <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">Note that
spatial views only use a single function to define the
index. As a result this function is defined as the value of
the spatial views name.</p>

<p style="margin-left:11%; margin-top: 1em">The other
folder at the top level directory of a sample data folder is
the &quot;docs&quot; folder This folder will contain all of
the documents to load into Couchbase. Each document in this
folder is contained in a separate file and each file should
contain a single JSON document. The key name for the
document will be the name of the file. Each file should also
have a &quot;.json&quot; file extension which will be
removed from the key name when the data is loaded. Since
each document to be loaded into Couchbase is in a separate
file there can potentially be a large amount of files. The
docs folder allows subfolders to help categorize
documents.</p>

<a name="ENVIRONMENT AND CONFIGURATION VARIABLES"></a>
<h2>ENVIRONMENT AND CONFIGURATION VARIABLES</h2>


<p style="margin-left:11%; margin-top: 1em">CB_USERNAME -
The username of the Couchbase cluster to connect to.
CB_PASSWORD - The password of the Couchbase cluster to
connect to.</p>

<a name="SEE ALSO"></a>
<h2>SEE ALSO</h2>



<p style="margin-left:11%; margin-top: 1em"><b>cbimport</b>(1),
<b>cbexport</b>(1)</p>

<a name="CBDOCLOADER"></a>
<h2>CBDOCLOADER</h2>


<p style="margin-left:11%; margin-top: 1em">Part of the
<b>cbdocloader</b>(1) suite</p>
<hr>
</body>
</html>
